vv#SQL #혼공S #DB 

>프로젝트 진행 과정중 하나이다

: 테이블 구조(표 구조)를 미리 설계하는 개념
- 폭포수 모델을 사용
- 모델링은 폭포수 모델의 업무 분석과 시스템 설계 단계에 해당
<br>
<br>

##  프로젝트 진행단계
프로젝트 : 현실세계에서 일어나는 업무를 컴퓨터 시스템으로 옮겨놓는 과정 = 대규모 소프트웨어를 작성하기 위한 전체 과정
❗️ 즉. DB모델링은 어떤 프로그램의 설계도임

<br>
폭포수 모델 : 한 단계가 끝나면 폭포 떨어지듯 그 다음 단계가 진행되는 모델
<br>
ex) 인터넷 쇼핑몰을 구축하는 프로그램을 짠다면,,,
	1. 프로젝트 계획 : 물건들을 온라인으로 판매하기 위한 계획단계
	2. 업무 분석 : 어떤 마켓의 업부를 분석 -> 재고는 어케 파악하는지, 물건은 어떻게 계산하는지. 등
	3. 시스템 설계 : 업무 분석을 컴퓨터에 적용시키기 위해서 다듬는 과정
	4. 프로그램 구현 : 실제 프로그래밍 언어로 코딩하는 단계 JS, JSP 등등
	5. 테스트 : 코딩에 오류가 없는지 확인
	6. 유지보수 : 문제점 보완하고 기능 추가 과정

<br>
<br>

---
## DB 모델링
: 사용하는 실제 물건이나 작업을 DBMS의 데이터베이스 개체로 옮기는 과정 = 현실에 쓰이는것을 표로 만들기

- 데이터 : 하나하나의 정보= 치마, 바지 등 개별적인 정보
- 테이블 : 데이터를 입력하기 위한 표
- 열 이름 : 서로 달라야 함
- 데이터 형식 : 열에 저장되는 데이터 형식, 이름이라고 되어있으면 문자로 저장
- 행 : 실질적인 데이터 -> gabin/박가빈/서울특별시 하나의 행으로 행 데이터라고 함
		데이터 개수 = 행 개수
- 기본 키 (PK) : 각 행을 구문하는 유일한 열 = 대표 열
<br>
<br>

----
## DB의 A~Z
> 데이터 베이스는 데이터를 저장하는 공간이고, 그 안에 테이블을 만들어서 저장
> 쇼핑몰 데이터를 예시로 만들어보자.

### 1. 데이터 베이스 만들기
스키마탭에서 shop_db로 데이터 베이스를 만든다
<br>

### 2. 테이블 만들기
쇼핑몰 DB에서 회원 테이블과 제품 테이블을 만들어보자.
<br>

#### 테이블 설계하기
: 열 이름과 데이터 형식을 지정하는 것.

회원테이블

| 이름 | 영문 이름 | 데이터 형식 | 문자의 최대 길이 | null 허용 안 함 |
| ---- | ---- | ---- | ---- | ---- |
| 아이디(PK) | member_id | char | 8글자 | yes |
| 회원 이름 | member_name | char | 5글자 | yes |
| 주소 | member_addr | char | 20글자 | no |

<br>

제품 테이블

| 열 이름 | 영문이름 | 데이터 형식 | 문자의 최대 길이 | null 허용 안 함 |
| ---- | ---- | ---- | ---- | ---- |
| 제품 이름(PK) | product_name | char | 4글자 | yes |
| 가격 | cost | int |  | yes |
| 제조 일자 | make_date | date |  | no |
| 제조 회사 | company | char | 5글자 | no |
| 남은 수량 | amount | int |  | yes |

<br>

#### 테이블 생성하기
![[스크린샷 2024-02-07 오후 2.33.39.png]]
설계한 대로만 잘 짜면 된다.
<br>
<br>

### 3. 데이터 입력하기
| 아이디 | 회원 이름 | 주소 |
| ---- | ---- | ---- |
| tess | 나훈아 | 경기 부천시 중동 |
| hero | 임영웅 | 서울 은평구 증산동 |
| iyou | 아이유 | 인천 남구 주안동 |
| jyp | 박진영 | 경기 고양시 장항동 |
| gabin | 박가빈 | 서울 도봉구 쌍문동 |
<br>
| 제품 이름 | 가격 | 제조일자 | 제조회사 | 남은 수량 |
| ---- | ---- | ---- | ---- | ---- |
| 바나나 | 1500 | 2024-02-07 | 델몬트 | 3 |
| 카스 | 2500 | 2023-12-31 | OB | 9 |
| 삼각김밥 | 800 | 2024-02-06 | CU | 2 |
| 칙촉 | 3500 | 2024-01-15 | 롯데 | 5 |
| 연세우유크림빵 | 2900 | 2024-02-04 | 연세우유 | 1 |
<br>
![[스크린샷 2024-02-07 오후 3.36.06.png]]
<br>
<br>
### 4. 데이터 활용하기
SQL의 SELECT문을 이용해서 데이터를 조회해보자.
❗️SQL = Query 쿼리 와 동일하다
<br>

![[스크린샷 2024-02-07 오후 3.44.28.png]]
데이터 베이스(스키마)를 꼭 클릭해주고 옆에 쿼리 창에 입력한다
<br>
❗️SELECT  기본형식 : `SELECT 열_이름 FROM 테이블_이름[WHERE 조건]` . * 는 모든 열.

1) 모든 행 조회 : `SELECT * FROM MEMBER;`
2) 회원 테이블에서 이름, 주소만 일부추출 : `SELECT member_name, member_addr FROM member;`
3) 특정 조건 추출 : `SELECT * FROM member WHERE member_name = '아이유';
<br>
<br>

----
## DB 개체

> 핵심 개체는 테이블이지만 인덱스, 뷰, 스토어드 프로시저, 트리거, 함수 등 다른 개체도 필요하다
> 각각 독립적인 개체가 아닌 핵심 개체인 테이블과 상호작용한다
> 어떤 것들은지 간략하게 알아보자.
<br>
### 인덱스
: 찾아보기 기능처럼 하나의 글자로 해당 데이터 베이스로 넘어가서 찾는 기능

- 데이터가 많아질 때, 출력속도 빠르게 해준다
- 인덱스 사용 쿼리 : `CREATE INDEX idx_member_name ON member(member_name);`
- execution plan에서 Non-unique key lookup = 인덱스 검색(index scan)
<br>
### 뷰
: 테이블과 상당히 동일한 성격의 가상의 테이블

- 보안 강화
- SQL문 간단하게 사용
- 사용자가 select문(뷰)를 이용해서테이블에 접근하는 개념

![[스크린샷 2024-02-07 오후 9.35.48.png]]
<br>
### 스토어즈 프로시저
: mySQL에서 제공하는 프로그래밍 기능
- 여러 개의 SQL을 묶어서 편리하게 사용
- C, java, python과 같은 프로그래밍의 식들을 사용
- 구분 문자 `DELIMITER // ~ DELIMITER;` 이용하고 `BEGIN과 END` 사이에 쿼리작성 
<br>

![[스크린샷 2024-02-07 오후 9.51.02.png]]
원래라면 두 개의 쿼리 문이므로 두개의 쿼리창으로 구분해서 실행된다.
스토어드 프로시저를 이용해서 합쳐보자

![[스크린샷 2024-02-07 오후 9.58.31.png]]
해당 구문을 이용하면...
개체 이름만 호출 시, 두개의 쿼리문을 간단히 불러올 수 있다.
![[스크린샷 2024-02-07 오후 10.01.43.png]] 

