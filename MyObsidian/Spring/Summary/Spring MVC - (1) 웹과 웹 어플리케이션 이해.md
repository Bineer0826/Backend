## www
> 문서와 문서를 클릭만으로도 쉽게 이동할 수 있는 하이퍼 텍스트에서 영감을 받아 월드와이드 웹이 생겨났다

- 주로 정적페이지를 이용하는 서비스이다
	- www.xxxxx.com 에서는 그냥 회사페이지
	- www.xxxxx.com/map 에서는 회사 약도
- 시대가 발전하면서 신용카드 결제, 투표, 게시글 모두 동적페이지 가능
	- 이를 구현하기 위해서 웹 프로그래밍 언어가 등장하게 되었다.
	- 하나의 **서버**에 박태환, 손흥민 등 5명의 정보 존재하면 어디서나 클라이언트가 볼 수 있도록 데이터가 동기화가 되어야한다
	- 상황에 맞춰서 항상 변하는 동적 페이지
<br>
<br>

----
## 웹 서버와 웹 애플리케이션 서버
> 앞서 말한 것처럼 동적인 페이지를 구현하려면 서버가 필요!!!!!!
> 서버에는 2가지가 존재한다 웹서버냐 웹어플리케이션 서버냐
<br>

 클라이언트(컴퓨터) - 웹서버 - WAS(웹어플서버) - DB
 이런식으로 구성
 
<br>

#### 웹 서버(Apache, NginX)
: 가장 먼저 클라이언트(컴퓨터)의 요청을 받는 서버

- 클라이언트와 직접 통신
- HTTP를 기반으로 동작
- 역할 : 클라이언트 요청에 따른 **==정적 페이지==** 보여줌
- 지도, 회사 로고처럼 정적인 요청을 하면 즉시 응답
- **html,css,js / png.ipg / mp3 등**
<br>

#### 웹 어플리케이션 서버(WAS)
: 클라이언트가 동적 페이지를 요청할 경우, 응답하는 서버

- HTTP 기반으로 동작
- 로직 리소스가 비쌈
- 웹 서버가 클라이언트 요청을 받고 동적페이지를 원하면
- 웹 어플리케이션 서버로 위임(일처리 넘긴다)(클라이언트와 간접통신)
- 똑같이 요청에 따라서 동적 페이지 제공
- 오류시, 오류화면 노출 불가능
- 데이터베이스는 다른 네트워크와 통신하는 경우도 있음
- **tomcat, Jboss, Jeus**
<br>

> [! 웹 어플리케이션 서버는 웹 서버 역할까지 할 순 없을까?]
> 	-> 가능하다 하지만 어플리케이션 과부화를 방지하기 위해서 분리해서 구성하는 방식이 좋다
<br>
<br>
<br>

---
### 웹 프로그래밍 언어
#### ASP
: active server page, 비교적 쉬운 VBScript 언어를 이용한 비교적 쉬운 윈도우 웹서버 언어
- 사용 안 함
- 마이크로 소프트에 최적화
- 과거의 유지보수가 아니라면 no...
<br>
#### PHP
: hypertext Preprocessor.** C**를 기반으로 만들어진 웹 프로그래밍 언어 
- 빠른 실행속도
- 배우기 쉬움
- 소규모에 적합
- 보안취약
- 아직까지도 인기
<br>

#### JSP = 자바 서블릿
: java sever page, **자바**를 기반으로 만들어진 웹 프로그래밍 언어

- 컴파일 이후 서블릿으로 변환되어 서버에서 동적으로 작동
- 서블릿으로 변환된 JSP는 사용자 요청을 쓰레드를 이용해 처리
- 그래서 과부화 걱정없이 웹 서비스 제공
- 주로 뷰를 다루기 위해서 사용
- DB 연동이 복잡함
<br>
<br>
[3가지 비교](https://www.researchgate.net/profile/Joydip-Dhar/publication/256404467/figure/tbl2/AS:669101924024330@1536537738665/Examples-of-PHP-JSP-and-ASPNET-scripts-with-HTML.png)
<br>
<br>

---
## 서블릿(Servlet)
: 수많은 웹 요청과 응답이 있지만 간단한 메서드를 이용해서 체계적으로 다룰 수 있게 해주는 기술
즉, 요청-응답 모델을 통해서 호출되는 애플리케이션을 호스팅하는 서버기능을 확장하게 하는 java언어 클래스
<br>
> 앞서 말한 것처럼 JSP에서 서블릿을 변환해서 한다고 했다
<br>
요청 시,
1. 클라이언트 요청
2. 웹서버가 WAS(JSP)로 위임
3. JSP는 서블릿으로 처리(자바서블릿이므로)
	1. Request, Response 요청 객체를 만들기
	2. 서블릿 컨테이너가 요청한 Request 객체를 실행 `HttpServletRequest`
	3. 종료해서 Response 응답 객체가 생성 `HttpServletResponse`
	4. 응답 객체 정보로 클라이언트에게 전달
 4. 전달 완료
<br>
> [! 왜 서블릿으로 처리하는지?]
> 	 모든 서블릿은 라이프사이클 메소드를 정의하는 서블릿 인터페이스를 구현해야한다
> 	 즉, 객체 생성을 반드시 해야하므로 3의 내부과정이 있는 것이다. 여기서 HTTP서블릿 클래스는 doGet, doPost 메서드 제공(관련서비스처리)
<br>

### 서블릿 컨테이너
: 서블릿을 지원하는 WAS 
- 서블릿 객체를 생성, 초기화, 호출, 종료하는 생명주기 관리
- 서블릿 객체는 싱글톤(객체 하나로 공유해서 쓰는..)으로 관리
- 동시 요청을 위한 멀티쓰레드 처리 지원
<br>
> [! 그러면 객체 구현을  다 내가 작성해야 하는건가?]
> -  고객 요청이 올때마다 계속 객체 생성하는 것은 비효율적이다 요청객체는 데이터값이 매번 달라져서 그럴 수 있지만... 한 마디로 서버만 잡아주는 기능만 제대로 하면 되는거라(호스팅) 하나로 공유한다
> - 하나로 만들면 모든 고객 요청(새로운 데이터들)이 동일한 서블릿 객체 인스턴스에 접근하게 된다
> - **공유 변수 사용 주의**

[웹 어플리케이션에 관한 문서 : 오라클 docs](https://docs.oracle.com/javaee/5/tutorial/doc/bnafe.html)
<br>
<br>

---
## 멀티 쓰레드
> 앞에서 배운대로 
> 클라이언트 - 요청- web서버 - WAS서버로 연결 -> 서블릿을 지원하도록 서블릿 컨테이너 호출
> WAS에서 누가 서블릿을 호출해주는 것일까?
<br>

### 쓰레드
: 애플리케이션 코드를 하나하나 순차적으로 실행함

- main 메서드 실행 = main 쓰레드가 실행되는 것
- 쓰레드가 곧 실행해주기 때문에 없으면 JSP는 무쓸모
- 한 번에 하나의 코드라인만 수행
- 동시 처리할 경우 쓰레드를 추가 생성해야함
<br>
> [! 요청마다 쓰레드를 추가하게 된다면?]
>  -> 동시처리 가능하고 CPU, 메모리가 허용 가능하면 괜찮다
>   but, 쓰레드 생성비용은 비싸고 응답마다 쓰레드 생성하면 응답속도 저하, 컨텍스트 스위칭 비용발생, 생성에 제한이 없음 -> 서버 죽음
<br>
<br>

### 쓰레드 풀
: WAS 내에 쓰레드 풀을 만들어서 쓰레드를 생성하고 죽이는 것이 아닌 몇 개의 쓰레드를 보유한 채로 빌려다쓰는 개념 -> 서버의 한계점을 알 수 있고 쓰레드 대기하거나 거절할 수 있따
<br>
<br>


----
## 페이지들
### 정적인 리소스들
: 정적HTML, CSS, JS, 이미지, 영상들을 제공 = 주로 웹브라우저들
-> 단순히 요청 - 웹서버에 있는 리소스 파일을 전달
<br>

### HTML 페이지
- 동적 HTML 파일을 생성해서 전달
- 웹 브라우저

> [! 과정]
>  웹브라우저 : 주문정보 요청 - WAS : DB에서 주문정보 조회 이것을 동적으로 HTML 생성(view template : JSP, 타임리프) - 동적 HTML 전달
<br>
<br>

### HTTP API
: HTML이 아닌 데이터를 전달
- 주로 JSON 형식
- 다양한 시스템에서 호출
	1. 데이터만 주고받음
	2. UI 화면이 필요할 때는 클라이언트가 별도 처리
	3. 앱, 웹에서, 리액트혹은 뷰같은 웹 클라이언트에서 요청
	4. 주문서버-결제서버
	5. 기업간 데이터 통신

> [! 과정]
>  웹브라우저 : 주문정보 요청 - WAS : DB에서 주문정보 조회 이것을 JSON 방식 -> HTML 해석 불가 => 주로 다양한 시스템들이 호출한다
> 아이폰에서 데이터만 달라고 하던지, 결제서버에서 데이터만 달라고 하던지, 등등

<br>
❗️백엔드 개발자는 **1. 정적페이지 어떻게 제공할 건지 2. 동적페이지 어떻게 제공할 건지 3. HTTP API 어떻게 제공할 건지**  를 고민한다
<br>
<br>

### SSR : 서버 사이드 렌더링
: (웹)서버에서 최종 HTML을 생성해 클라이언트에 최종적으로 전달

- 정적인 화면에서 주로 사용
- JSP, 타임리프 -> 백엔드

### CSR : 클라이언트 사이드 렌더링
: 웹 서버가 아닌 브라우저에서 자바스크립트를 이용해 동적인 부분을 생성해서 적용하는 것
- 앱처럼 부분부분 변경가능
- 동적인 화면에 사용
- 구글 지도, 구글 캘린더
- 리액트, vue.js -> 웹 프론트엔드

> [!과정]
> 웹 브라우저 -> HTML 요청 -> 서버가 빈 HTML와 자바스크립트 링크를 브라우저에 보내줌 -> 브라우저는 자바스크립트로 동적페이지 구현(코드작성) + 받은 데이터 예쁘게 -> 서버에 전달 -> 보여줌 

<br>
<br>
> [! ❗️백엔드 개발자 입장에서 어디까지 알아야 하는건지...? ]
>  SSR은 기술학습 **필수** CSR은 옵션

<br>
<br>
<br>

----
## 자바 웹 기술 역사
과거
- 서블릿 1977 : HTML 생성이 어려움 자바코드라...
- JSP 1999 : HTML 편리하지만 비즈니스 로직까지 너무 많은 역할 담당. 다 짜야함
- 서블릿 + JSP 조합인 MVC 패턴 : 모델, 뷰, 컨트롤러로 나누어서 개발
- MVC 프레임워크 2000-2010 : MVC 패턴 자동화. 다양한 기능 지원 
<br>
현재
- 애노테이션 기반 스프링 MVC 등장 : @Controller
- 스프링 부트 등장 : 서버를 내장함. 서버를 설치할 필요없이 배포
<br>
최신
- 웹 서블릿 기반의 스택 + MVC
- 웹 리액티브 : 웹 플럭스(최소 쓰레드 최대 성능, 함수형 스타일 -> 동시처리 굿, 서블릿 기술 사용 안함)
<br>
<br>

## 자바 뷰 템플릿 역사
  뷰 템플릿 : 동적으로 보여주는 뷰 기능

- JSP : 속도 느림, 기능 부족
- 프리마커, 벨로시티 : 속도 완전 빠름, 다양한 기능
- 타임리프 : HTML을 유지하면서 예쁜 뷰 템플릿 적용 기능, MVC와 강력한 통합, 최선의 선택