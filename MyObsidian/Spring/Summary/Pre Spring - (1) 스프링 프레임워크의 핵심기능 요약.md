#Spring #FrameWork 
<br>
<br>
## 라이브러리 vs 프레임워프
 

## 의존성 주입(DI)
Dependency Injection
: 의존하는 부분을 외부에서 주입하는 것. = 의존한다는 것은 서로의 클래스에 영향이 생기는 것
<br>
<br>

### 의존 유형
1. (정적인) 클래스 의존(구현 의존)
	   ex) A클래스의  a메서드를 호출하면 B클래스의 b메서드를 호출하는 것으로 정했다가 새로운 C클래스의 c의 메서드로 호출하도록 변경할 경우,
	   객체생성을 C로 다시하고 메서드호출도 C.c()로 바꾸고..  -> 하나하나 일일이 바꿔야함
	   
2. 인터페이스 의존 : 위와 같이 일일이 변경해야하는 문제를 인터페이스로 해결
	   ex) B클래스는 D라는 인터페이스를 구현하게 된다면, 
	   A클래스의 객체생성, 메서드를 변경하는 것이 아닌, B클래스 메서드를 지우고 C 클래스를 만들어서 인터페이스 D를 구현하면 된다.  -> 한 곳만 수정하면 됨
	   
```java
	class A {
		a() {
			D d = new D();
			D.d();
 		}
	}

	interface D {
		b(){
			...
		}
	
	}


	class B implement D {
		//D abstract 메서드 구현
		
		@Override
		b() {
		
		...}	
	} 

```
<br>
<br>
- 인터페이스를 이용해서 의존성을 만들기
- 인스턴스를 명시적으로 생성하지 않음 = new 키워드 이용 X
- 어노테이션을 클래스에 부여 = 스프링은 시작할 때, 모든 패키지를 스캔하고 해당 어노테이션 클래스의 객체를 생성해줌
- 스프링 프레임워크에서 인스턴스 생성
- 인스턴스를 이용하는 곳에 어노테이션 부여
<br>
<br>
<br>
### 어노테이션(annotation)
: 주석이라는 의미, 외부 소프트웨어에 필요한 처리 내용을 전달 = 다양한 기능을 사용할 수 있다.
- 형태 : `@___`

<br>
<br>

### 레이어별로 사용
폴더관리처럼 마구잡이로 쓰지 않고 계층 즉, 레이어별로 나누어서 어노테이션을 구성하는게 사용하기 편하다

1. 애플리케이션 레이어 : 클라이언트와의 데이터 입출력을 제어하는 레이어 = 메뉴 입출력 제어
   
2. 도메인 레이어 : 애플리케이션 중심이 되는 레이어, 업무처리 수행 = 서비스 제공 일련의 과정 전체 
   
3. 인프라스트럭쳐 레이어  :  데이터 베이스의 지속성, 영속성을 담당 


#### 인스턴스 생성 어노테이션

| 종류| 특징 |
| --- | --- |
| @Controller | 인스턴스 생성 지시 + 스프링 MVC를 이용할 때 컨트롤러에 부여|
| @Service | 인스턴스 생성 지시 + 트랜잭션 경계가 되는 도메인 기능에 부여 |
| @Repository | 인스턴스 생성 지시 + 데이터베이스 액세스(리포지토리) 기능을 부여 |
| @Component | 위 용도 이외의 클래스에 부여 |

<br>
<br>

### 커스텀 어노테이션
: 기능을 직접 커스텀도 가능하다 만들때는 `java.lang.Annotation` 인터페이스를 상속하고 만든다 + 전용 자바 파일을 생성한다

<br>
<br>

---
## 관점 지향 프로그래밍(AOP)
Aspect Oriented Programming
: 횡단적 관심사를 추출하고 여러 곳으로 호출할 수 있게 해놓으면 개발자는 중심적 관심사에만 집중해서 작성하면 되는구조
<br>
- 중심적 관심사 : 실현해야할 기능을 나타내는 프로그램
- 횡단적 관심사 : 본질적인 기능은 아니지만 품질, 유지보수 면에서 필요한 기능을 나타내는 프로그램
<br>
<br>
❗️⭐️유지보수가 매우 중요하기 때문에 AOP에서는 예외처리가 반드시 필요하다! 또한 예외처리를 하면 코드가 복잡해지기 때문에 어떤 것이 유지보수고 어떤 코드가 주요 코드인지 헷갈리기 때문에 위와 같이 관심사를 분리한다!!!
<br>
<br>

| 용어 | 내용 |
| --- | --- |
| Advice | 횡단적 관심사의 구현(메서드). 로그 출력 및 트랜젝션 제어 등 |
| Aspect | advice를 정리하는 것(클래스). |
| JoinPoint| advice를 중심적인 관심사(주요프로그램)에 적용하는 타이밍. 생성자 실행전/후 등 실행되는 타이밍 |
| PointCut | advice를 삽입할 수 있는 위치. 조건처리 가능 |
| Interceptor | 처리의 제어를 인터셉트하기 위한 구조 프로그램. 스프링프레임워크는 인터센트라는 메커니스즘으로 advice가 중심관심사에 추가한 것처럼 보이게 함 |
| Target | 어드바이스가 도입되는 대상 |